{% extends 'ngux-tophat/base.html' %}
{% load humanize toolbox_tags %}

{% block content %}
<style type="text/css">
    table .data {text-align:right;}
</style>

<div class="page-header">
    <h1>Complaints by Neighborhood</h1>
</div>

<div class="row-fluid">
    <div class="span12">
        <h2>Summary information</h2>
        <table class="table table-striped table-bordered table-condensed">
            <tbody>
                <tr>
                    <td>Geocoded complaints</td>
                    <td class="data">{{ geocoded_complaints|intcomma }}</td>
                </tr>
                <tr>
                    <td>Total complaints</td>
                    <td class="data">{{ total_complaints|intcomma }}</td>
                </tr>
                <tr>
                    <td>Percent of complaints geocoded</td>
                    <td class="data">{{ percent_complaints_geocoded|floatformat:2 }}%</td>
                </tr>
                <tr>
                    <td>Avg. days wait until complaint is inspected or otherwise addressed</td>
                    <td class="data">{{ avg_wait_time|floatformat:2 }}</td>
                </tr>
                <tr>
                    <td>Median wait until complaint is inspected or otherwise addressed (KMF fit)</td>
                    <td class="data">{{ median_wait_time|floatformat:2 }}</td>
                </tr>

            </tbody>
        </table>

        <h2>By neighborhood</h2>
        <table class="table table-striped table-bordered table-condensed">
            <thead>
                <tr>
                    <th><a href="name">Neighborhood</a></th>
                    <th><a href="population">Population</a></th>
                    <th><a href="open_complaints">open complaints</a></th>
                    <th><a href="closed_complaints">addressed/inspected complaints</a></th>
                    <th><a href="total_unresolved_after_one_year">total unresolved > 1 yr</a></th>
                    <th><a href="total_complaints">total complaints</a></th>
                    <th><a href="percent_over_one_year_to_response">% > 1 yr</a></th>
                    <th><a href="avg_days_to_response">Avg days to resolve</a></th>
                    <th><a href="kmf_median_days_to_response">KMF median</a></th>
                </tr>                
            </thead>
            <tbody>
                {% for n in neighborhoods %}
                <tr>
                    <td>{{ n.name }}</td>
                    <td class="data">{{ n.population|floatformat:0|intcomma }}</td>
                    <td class="data">{{ n.open_complaints|intcomma }}</td>
                    <td class="data">{{ n.closed_complaints|intcomma }}</td>
                    <td class="data">{{ n.total_unresolved_after_one_year|intcomma }}</td>
                    <td class="data">{{ n.total_complaints|intcomma }}</td>
                    <td class="data">{{ n.percent_over_one_year_to_response|floatformat:2 }}</td>
                    <td class="data">{{ n.avg_days_to_response|floatformat:2 }}</td>
                    <td class="data">{{ n.kmf_median_days_to_response|floatformat:2 }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>    
    </div>
</div>

{% endblock %}